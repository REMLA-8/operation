services:
  model-service:
    image: ghcr.io/remla24-team8/model-service:v0.1.0
    container_name: model-service
    volumes:
        - model-service-model-volume:/model-service/models

    healthcheck:
      test: ".venv/bin/python model_service/health.py"
      interval: 2s
      timeout: 30s
      retries: 15

  app-backend:
    image: ghcr.io/remla24-team8/app-backend:3702638
    container_name: app-backend
    depends_on:
      model-service:
        condition: service_healthy
    ports:
      - "127.0.0.1:5099:5000"
    environment:
      MODEL_SERVICE_URL: 'http://model-service:5000'

volumes:
  model-service-model-volume:
    driver: local
    name: model-service-model-volume

networks:
  default:
    name: remla24-team8